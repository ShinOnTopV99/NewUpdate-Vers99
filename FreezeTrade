-- SERVICES
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- SAFE GUI SETUP
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FreezeTraderUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- MAIN FRAME
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 250, 0, 140)
mainFrame.Position = UDim2.new(0.5, -125, 0.6, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

-- FREEZE BUTTON
local freezeBtn = Instance.new("TextButton")
freezeBtn.Size = UDim2.new(0, 200, 0, 35)
freezeBtn.Position = UDim2.new(0.5, -100, 0, 10)
freezeBtn.Text = "❄ Freeze"
freezeBtn.BackgroundColor3 = Color3.fromRGB(20, 150, 255)
freezeBtn.TextColor3 = Color3.new(1, 1, 1)
freezeBtn.TextScaled = true
freezeBtn.Font = Enum.Font.FredokaOne
freezeBtn.Parent = mainFrame

-- PET SLOT DISPLAY
local slotFrame = Instance.new("Frame")
slotFrame.Size = UDim2.new(0, 200, 0, 60)
slotFrame.Position = UDim2.new(0.5, -100, 0, 55)
slotFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
slotFrame.BorderSizePixel = 0
slotFrame.Visible = false
slotFrame.Parent = mainFrame

local grid = Instance.new("UIGridLayout")
grid.FillDirection = Enum.FillDirection.Horizontal
grid.CellSize = UDim2.new(0, 50, 0, 50)
grid.CellPadding = UDim.new(0, 10, 0, 0)
grid.Parent = slotFrame

-- CREDIT
local credit = Instance.new("TextLabel")
credit.Size = UDim2.new(1, -10, 0, 20)
credit.Position = UDim2.new(0, 5, 1, -25)
credit.Text = "Made by Zeno"
credit.BackgroundTransparency = 1
credit.TextColor3 = Color3.fromRGB(200, 200, 200)
credit.TextXAlignment = Enum.TextXAlignment.Right
credit.Font = Enum.Font.GothamBold
credit.TextScaled = true
credit.Parent = mainFrame

-- FREEZE LOGIC
local frozen = false

freezeBtn.MouseButton1Click:Connect(function()
	if frozen then return end
	frozen = true
	freezeBtn.Text = "✅ Frozen"
	slotFrame.Visible = true

	-- Detect trade GUI
	local tradeGui
	for _, v in ipairs(playerGui:GetDescendants()) do
		if v:IsA("Frame") and v.Visible and v.Name:lower():find("trade") then
			tradeGui = v
			break
		end
	end

	if not tradeGui then
		warn("❌ Trade GUI not found.")
		return
	end

	-- Detect opponent pet buttons
	local opponentFrame
	for _, v in ipairs(tradeGui:GetDescendants()) do
		if v:IsA("Frame") and v.Visible and v.Name:lower():find("other") then
			opponentFrame = v
			break
		end
	end

	if not opponentFrame then
		warn("❌ Opponent pet frame not found.")
		return
	end

	local shown = 0
	for _, petBtn in ipairs(opponentFrame:GetChildren()) do
		if (petBtn:IsA("TextButton") or petBtn:IsA("ImageButton")) and shown < 3 then
			petBtn.AutoButtonColor = false
			petBtn.Active = false
			petBtn.BackgroundColor3 = Color3.fromRGB(90, 90, 90)

			local slot = Instance.new("Frame")
			slot.Size = UDim2.new(0, 50, 0, 50)
			slot.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
			slot.Parent = slotFrame

			local label = Instance.new("TextLabel", slot)
			label.Size = UDim2.new(1, 0, 1, 0)
			label.BackgroundTransparency = 1
			label.TextColor3 = Color3.new(1, 1, 1)
			label.TextScaled = true
			label.Font = Enum.Font.GothamBold

			local petName = petBtn:FindFirstChildWhichIsA("TextLabel")
			if petName then
				label.Text = petName.Text
			else
				label.Text = "Pet"
			end

			shown += 1
		end
	end
end)
